# GravityManagement (GravityPM)

## معرفی پروژه
GravityManagement (GravityPM) یک سیستم مدیریت پروژه مدرن و جامع است که با هدف ساده‌سازی جریان‌های کاری پروژه با ویژگی‌های خودکار و یکپارچه‌سازی بی‌وقفه با گیت‌هاب طراحی شده است. این سیستم مدیریت وظایف، تخصیص منابع، اتوماسیون مبتنی بر قوانین و همکاری بلادرنگ را پشتیبانی می‌کند.

## تکنولوژی‌های استفاده شده

| لایه        | تکنولوژی‌ها و فریم‌ورک‌ها                  |
|-------------|--------------------------------------------|
| بک‌اند     | FastAPI، پایتون، MongoDB، Redis، JWT       |
| فرانت‌اند  | Next.js 14، React، TypeScript، Tailwind CSS، Radix UI |
| زیرساخت    | Docker، Git، GitHub Actions                 |

## معماری سیستم

```mermaid
graph TB
    subgraph "لایه کلاینت"
        A[فرانت‌اند Next.js]
        B[کامپوننت‌های React]
        C[کلاینت API]
    end

    subgraph "لایه API"
        D[سرور FastAPI]
        E[میان‌افزار احراز هویت]
        F[میان‌افزار CORS]
        G[مدیریت مسیرها]
    end

    subgraph "لایه سرویس"
        H[منطق کسب‌وکار]
        I[یکپارچه‌سازی گیت‌هاب]
        J[اعتبارسنجی داده‌ها]
        K[مدیریت خطا]
    end

    subgraph "لایه داده"
        L[پایگاه داده MongoDB]
        M[مدل‌های داده]
        N[اتصال به پایگاه داده]
    end

    subgraph "سرویس‌های خارجی"
        O[API گیت‌هاب]
        P[وبهوک‌های گیت‌هاب]
    end

    A --> C
    C --> D
    D --> E
    D --> F
    D --> G
    G --> H
    H --> I
    H --> J
    H --> K
    H --> N
    N --> L
    I --> O
    I --> P
```

## جریان داده‌ها

### جریان احراز هویت

```mermaid
sequenceDiagram
    participant کاربر
    participant فرانت‌اند
    participant بک‌اند
    participant پایگاه‌داده

    کاربر->>فرانت‌اند: درخواست ورود
    فرانت‌اند->>بک‌اند: ارسال POST به /auth/login
    بک‌اند->>پایگاه‌داده: بررسی اعتبار
    پایگاه‌داده-->>بک‌اند: داده‌های کاربر
    بک‌اند-->>فرانت‌اند: توکن JWT
    فرانت‌اند-->>کاربر: ورود موفق
```

### جریان مدیریت پروژه

```mermaid
sequenceDiagram
    participant کاربر
    participant فرانت‌اند
    participant بک‌اند
    participant پایگاه‌داده
    participant گیت‌هاب

    کاربر->>فرانت‌اند: ایجاد پروژه
    فرانت‌اند->>بک‌اند: ارسال POST به /projects
    بک‌اند->>پایگاه‌داده: ذخیره پروژه
    پایگاه‌داده-->>بک‌اند: شناسه پروژه
    بک‌اند-->>گیت‌هاب: ایجاد مخزن (اختیاری)
    گیت‌هاب-->>بک‌اند: اطلاعات مخزن
    بک‌اند-->>فرانت‌اند: پروژه ایجاد شد
    فرانت‌اند-->>کاربر: پیام موفقیت
```

## نمونه ساختار پایگاه داده

| مجموعه     | فیلدها                                                                                  |
|------------|-----------------------------------------------------------------------------------------|
| کاربر      | _id، نام کاربری، ایمیل، نام کامل، رمز عبور هش شده، نقش، شناسه گیت‌هاب، فعال/غیرفعال، تاریخ‌ها |
| پروژه      | _id، نام، توضیحات، شناسه مالک، اعضا، وضعیت، مخزن گیت‌هاب، تاریخ‌ها                      |
| وظیفه      | _id، عنوان، توضیحات، شناسه پروژه، شناسه مسئول، وضعیت، اولویت، تاریخ سررسید، تاریخ‌ها    |

## نمای کلی API

| منبع          | مسیر                    | متد    | توضیح                         |
|---------------|-------------------------|--------|------------------------------|
| احراز هویت    | /auth/login             | POST   | ورود کاربر                   |
|               | /auth/register          | POST   | ثبت نام کاربر                |
| پروژه‌ها      | /projects               | GET    | لیست پروژه‌ها                |
|               | /projects               | POST   | ایجاد پروژه                  |
| وظایف         | /tasks                  | GET    | لیست وظایف                   |
|               | /tasks                  | POST   | ایجاد وظیفه                  |
| گیت‌هاب       | /github/webhook         | POST   | مدیریت وبهوک گیت‌هاب         |
|               | /github/repos           | GET    | دریافت مخازن کاربر           |

## ملاحظات امنیتی
- احراز هویت مبتنی بر JWT با کنترل دسترسی نقش‌ها
- هش کردن رمز عبور با bcrypt
- اعتبارسنجی ورودی و محافظت در برابر XSS
- اعتبارسنجی امضای وبهوک گیت‌هاب
- محدودیت نرخ و ذخیره امن توکن‌ها

## معماری استقرار

### محیط توسعه
```mermaid
graph TB
    subgraph "محیط توسعه"
        A[ماشین محلی]
        B[سرور توسعه Next.js :3000]
        C[سرور توسعه FastAPI :8000]
        D[MongoDB محلی]
    end

    A --> B
    A --> C
    A --> D
```

### محیط تولید
```mermaid
graph TB
    subgraph "محیط تولید"
        A[لود بالانسر]
        B[اپلیکیشن Next.js]
        C[اپلیکیشن FastAPI]
        D[خوشه MongoDB]
        E[کش Redis]
    end

    A --> B
    A --> C
    B --> C
    C --> D
    C --> E
```

## بهینه‌سازی عملکرد
- عملیات پایگاه داده ناهمزمان
- کش با Redis
- ایندکس‌گذاری پایگاه داده
- محدودیت نرخ API
- تقسیم کد و بارگذاری تنبل در فرانت‌اند

## پایش و لاگ‌گیری
- نقاط بررسی سلامت
- لاگ‌گیری ساختاریافته با سطوح مختلف
- تجمیع مرکزی لاگ‌ها

## نتیجه‌گیری
GravityManagement یک پلتفرم مدیریت پروژه مقیاس‌پذیر، امن و کارآمد با فناوری‌های مدرن و یکپارچه‌سازی بی‌وقفه با گیت‌هاب ارائه می‌دهد.
